architecture:
    data_flow: |
        User input (CLI args or interactive prompts) → Cobra command handler
        → Configuration loaded via Viper → Internal business logic
        → AI provider API calls → Response formatting and output
    key_files:
        - path: cmd/how/main.go
          role: Application entry point, initializes root command
        - path: internal/
          role: Business logic for AI interactions, provider management, context handling
    pattern: layered with cobra command structure
codebase_map:
    apps:
        how:
            entry: main.go
            path: cmd/how
            purpose: Main CLI application entry point
    packages:
        api:
            path: pkg/
            purpose: Public-facing API packages for external consumers
        core:
            path: internal/
            purpose: Internal business logic and AI provider integration
    scripts:
        install:
            path: scripts/install.sh
            purpose: Installation script for end users
commands:
    build: make build
    dev: make dev
    install: make install
    setup: how setup - configure AI provider
    test: make test
common_tasks:
    add_ai_provider:
        - Create provider interface in internal/
        - Implement provider with API client logic
        - Add provider selection to setup wizard via survey
        - Update configuration schema in viper setup
    add_command:
        - Create new command file in cmd/how/commands/
        - Implement command handler using cobra.Command struct
        - Register command with root command
    modify_prompt_handling:
        - Logic in internal/ for context collection and prompt building
        - Modify prompt templates or context gathering functions
conventions:
    naming:
        constants: UPPER_SNAKE_CASE for exported, camelCase for unexported
        files: snake_case or descriptive names
        functions: PascalCase for exported, camelCase for unexported
        packages: lowercase_package_names
    patterns:
        - Cobra command definitions map CLI arguments to handler functions
        - Viper manages configuration from setup wizard and env vars
        - Interactive input uses survey library for structured prompts
        - AI providers abstracted behind common interface
development:
    build: make build
    run: make dev and then ./bin/how [prompt]
    setup:
        - ensure go 1.22.4 installed
        - make setup-dev
project:
    description: AI shell assistant for commands, explanations, and code generation from terminal
    name: how
    primary_language: go
    type: cli
    version: 1.22.4
tech_stack:
    configuration: viper (YAML, TOML, env vars)
    framework: cobra CLI framework
    key_libraries:
        - name: cobra
          purpose: Command-line interface framework
        - name: survey
          purpose: Interactive terminal prompts for user input
        - name: viper
          purpose: Configuration management and environment variable binding
        - name: spinner
          purpose: Terminal spinners for visual feedback during long operations
        - name: color
          purpose: Terminal color output for syntax highlighting
        - name: gopkg.in/yaml.v3
          purpose: YAML parsing for configuration files
    runtime: go 1.22.4
